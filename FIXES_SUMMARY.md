# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö Trading Core –¥–ª—è Render

## üìä –°—Ç–∞—Ç—É—Å
‚úÖ **–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã**

---

## üêõ –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ #1: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Supabase
**–§–∞–π–ª:** `main.py` —Å—Ç—Ä–æ–∫–∞ 21

**–ë—ã–ª–æ:**
```python
SUPABASE_KEY = os.getenv("SUPABASE_KEY_FOR_CORE")
```

**–°—Ç–∞–ª–æ:**
```python
SUPABASE_KEY = os.getenv("SUPABASE_SERVICE_ROLE_KEY")
```

**–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**
- –ö–æ–¥ –∏—Å–∫–∞–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `SUPABASE_KEY_FOR_CORE`
- –í Render –±—ã–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `SUPABASE_SERVICE_ROLE_KEY`
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª–∞—Å—å ‚Üí Exit Status 1

---

### –ü—Ä–æ–±–ª–µ–º–∞ #2: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö API Endpoint
**–§–∞–π–ª:** `autotrader_service.py` —Å—Ç—Ä–æ–∫–∞ 15

**–ë—ã–ª–æ:**
```python
BOTHOST_UI_API_URL = os.getenv("BOTHOST_UI_API_URL")
```

**–°—Ç–∞–ª–æ:**
```python
BOTHOST_UI_API_URL = os.getenv("API_ENDPOINT")
```

**–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**
- –ö–æ–¥ –∏—Å–∫–∞–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `BOTHOST_UI_API_URL`
- –í Render –±—ã–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `API_ENDPOINT`
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–≤—è–∑–∏ —Å UI-–±–æ—Ç–æ–º –Ω–µ —Ä–∞–±–æ—Ç–∞–ª

---

### –ü—Ä–æ–±–ª–µ–º–∞ #3: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
**–§–∞–π–ª:** `main.py` –∫–ª–∞—Å—Å `TradingCore.__init__`

**–ë—ã–ª–æ:**
```python
if not SUPABASE_URL or not SUPABASE_KEY:
    logger.error("üö´ Supabase keys not set.")
```

**–°—Ç–∞–ª–æ:**
```python
missing_vars = []
if not SUPABASE_URL:
    missing_vars.append("SUPABASE_URL")
if not SUPABASE_KEY:
    missing_vars.append("SUPABASE_SERVICE_ROLE_KEY")

if missing_vars:
    logger.error(f"üö´ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: {', '.join(missing_vars)}")
    logger.error("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏—Ö –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Render Environment Variables.")
```

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∞ –≥–¥–µ –∏—Ö –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
- ‚úÖ Try-except –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Supabase –∫–ª–∏–µ–Ω—Ç–∞

---

## ‚ú® –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –î–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
**–§–∞–π–ª:** `main.py` –≤ `if __name__ == "__main__"`

```python
logger.info("=" * 60)
logger.info("üöÄ Trading Core Starting...")
logger.info("=" * 60)

env_vars_status = {
    "SUPABASE_URL": "‚úÖ" if SUPABASE_URL else "‚ùå",
    "SUPABASE_SERVICE_ROLE_KEY": "‚úÖ" if SUPABASE_KEY else "‚ùå",
    "ANALYSIS_INTERVAL": f"‚úÖ ({ANALYSIS_INTERVAL}s)",
    "DEFAULT_ASSET": f"‚úÖ ({DEFAULT_ASSET})",
}

logger.info("–°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:")
for var, status in env_vars_status.items():
    logger.info(f"  {var}: {status}")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
–¢–µ–ø–µ—Ä—å –≤ –ª–æ–≥–∞—Ö Render –≤—ã —Å—Ä–∞–∑—É —É–≤–∏–¥–∏—Ç–µ –∫–∞–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –∞ –∫–∞–∫–∏–µ –Ω–µ—Ç!

---

### 2. –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª .env
**–§–∞–π–ª:** `.env`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ `SUPABASE_KEY_FOR_CORE` ‚Üí `SUPABASE_SERVICE_ROLE_KEY`
- ‚úÖ `BOTHOST_UI_API_URL` ‚Üí `API_ENDPOINT`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π service_role –∫–ª—é—á
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏

---

### 3. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `RENDER_SETUP.md` - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Render
- ‚úÖ `FIXES_SUMMARY.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å –æ—Ç—á–µ—Ç–æ–º

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è | –°—Ç–∞—Ç—É—Å |
|------|-----------|--------|
| `main.py` | +39 —Å—Ç—Ä–æ–∫, -4 —Å—Ç—Ä–æ–∫–∏ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω |
| `autotrader_service.py` | +2 —Å—Ç—Ä–æ–∫–∏, -2 —Å—Ç—Ä–æ–∫–∏ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω |
| `.env` | +3 —Å—Ç—Ä–æ–∫–∏, -2 —Å—Ç—Ä–æ–∫–∏ | ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω |
| `RENDER_SETUP.md` | –ù–æ–≤—ã–π —Ñ–∞–π–ª | ‚úÖ –°–æ–∑–¥–∞–Ω |
| `FIXES_SUMMARY.md` | –ù–æ–≤—ã–π —Ñ–∞–π–ª | ‚úÖ –°–æ–∑–¥–∞–Ω |

---

## üéØ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Render

–ó–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ Render –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

```
‚úÖ SUPABASE_URL=https://qdilspmiaoxrnotarjnq.supabase.co
‚úÖ SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
‚úÖ ENCRYPTION_KEY=<–≤–∞—à_–∫–ª—é—á>
‚úÖ TELEGRAM_BOT_TOKEN_ADMIN=<—Ç–æ–∫–µ–Ω>
‚úÖ ADMIN_CHAT_ID=<–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_chat_id>
‚úÖ API_ENDPOINT=<URL_UI_–±–æ—Ç–∞>
```

### –®–∞–≥ 2: –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
git add .
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Supabase –∏ API endpoint"
git push origin cursor/fix-trading-core-supabase-error-9488
```

### –®–∞–≥ 3: –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –Ω–∞ Render

1. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –Ω–æ–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ push
2. –ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ "Manual Deploy" ‚Üí "Deploy latest commit"

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
============================================================
üöÄ Trading Core Starting...
============================================================
–°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  SUPABASE_URL: ‚úÖ
  SUPABASE_SERVICE_ROLE_KEY: ‚úÖ
  ANALYSIS_INTERVAL: ‚úÖ (10s)
  DEFAULT_ASSET: ‚úÖ (EURUSD=X)
============================================================
‚úÖ Supabase –∫–ª–∏–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: https://qdilspmiaoxrnotarjnq.supabase.co
Core starting up...
```

---

## ‚ùå Troubleshooting

### –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –≤–∏–¥–∏—Ç–µ Exit Status 1

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:**
   - –ù–µ `SUPABASE_KEY` - –∞ `SUPABASE_SERVICE_ROLE_KEY`
   - –ù–µ `BOTHOST_UI_API_URL` - –∞ `API_ENDPOINT`

2. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª—é—á–∏ –≤–∞–ª–∏–¥–Ω—ã–µ:**
   - SUPABASE_SERVICE_ROLE_KEY –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–º–µ–Ω–Ω–æ service_role (–Ω–µ anon)
   - ENCRYPTION_KEY –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º Fernet –∫–ª—é—á–æ–º

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ ADMIN_CHAT_ID –Ω–µ –∑–∞–≥–ª—É—à–∫–∞:**
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π —á–∏—Å–ª–æ–≤–æ–π ID, –Ω–µ `<–í–ê–®_–õ–ò–ß–ù–´–ô_CHAT_ID>`

4. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ Render:**
   - –¢–µ–ø–µ—Ä—å –≤—ã —É–≤–∏–¥–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

‚úÖ Trading Core —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è  
‚úÖ Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è  
‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è  
‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø–æ–º–æ–≥–∞—é—Ç —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π  
‚úÖ –°—Ç–∞—Ç—É—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "Live"  

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: —Å–º. `RENDER_SETUP.md`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: —Å–º. `.env`
- –ö–æ–¥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–æ–¥—É–ª—è: —Å–º. `main.py`
- –ö–æ–¥ –∞–≤—Ç–æ—Ç–æ—Ä–≥–æ–≤–ª–∏: —Å–º. `autotrader_service.py`

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 11 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
